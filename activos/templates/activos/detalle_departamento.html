{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Sistema de Gestión de Activos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{% static 'activos/css/styless.css' %}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
</head>

<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo-section d-flex align-items-center">
                <div class="logo">
                    <img src="{% static 'activos/img/slider1.jpg' %}" alt="logo"   height="70">
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-title">Navegación</div>


                <a href="{% url 'activos_departamento' departamento %}" class="nav-item">
                    <i class="bi bi-clipboard-data"></i>
                    <span>Todos los Activos</span>
                </a>

            </div>

            <div class="nav-section">
                <div class="nav-title">Configuración</div>
                
                <a href="{% url 'logout' %}" class="nav-item">
                    <i class="bi bi-box-arrow-right"></i>
                    <span>Cerrar Sesión</span>
                </a>
            </div>
        </div>

        <!-- MAIN CONTENT -->
        <div class="main-content">
            <div class="header">
                
                <div>
                    <h1 class="page-title">Sistema de Gestión de Activos</h1>
                    <span class="department-badge">Departamento: {{ departamento }} </span>
                </div>
<div class="dropdown">
                        <button class="btn btn-outline-light dropdown-toggle d-flex align-items-center" 
                                type="button" id="userDropdown" 
                                data-bs-toggle="dropdown" aria-expanded="false">
                            <div class="user-avatar me-2">
                                {% if user.first_name %}
                                    {{ user.first_name|first|upper }}
                                {% else %}
                                    {{ user.username|first|upper }}
                                {% endif %}
                            </div>
                            <div class="d-flex flex-column text-start">
                                <span class="fw-bold">
                                    {% if user.first_name %}
                                        {{ user.first_name }} {{ user.last_name }}
                                    {% else %}
                                        {{ user.username }}
                                    {% endif %}
                                </span>
                                <small class="text-muted">
                                    {% if user.is_superuser %}
                                        Administrador
                                    {% elif user.departamento %}
                                        {{ user.departamento }}
                                    {% else %}
                                        Usuario
                                    {% endif %}
                                </small>
                            </div>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                            
                            <li>
                                <a class="dropdown-item" href="{% url 'simple_password_change' %}">
                                    <i class="bi bi-key me-2"></i> Cambiar Contraseña
                                </a>
                            </li>
                            
                            <li><hr class="dropdown-divider"></li>
                            <li>
                                <a class="dropdown-item text-danger" href="{% url 'logout' %}">
                                    <i class="bi bi-box-arrow-right me-2"></i> Cerrar Sesión
                                </a>
                            </li>
                        </ul>
                    </div>
            </div>

            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card total">
                    <div class="stat-title">Total Activos</div>
                    <div class="stat-value">{{ total_activos }}</div>
                    <div class="stat-change positive">
                        <i class="bi bi-arrow-up"></i> Activos del departamento
                    </div>
                </div>

                <div class="stat-card operational">
                    <div class="stat-title">Operativos</div>
                    <div class="stat-value">{{activos_operativos}}</div>
                    <div class="stat-change positive">
                        <i class="bi bi-arrow-up"></i> En perfecto Estado 
                    </div>
                </div>

                <div class="stat-card damaged">
                    <div class="stat-title">Dañados</div>
                    <div class="stat-value">{{activos_danados}}</div>
                    <div class="stat-change negative">
                        <i class="bi bi-exclamation-triangle"></i> En estado Critico
                    </div>
                </div>

              
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
             <a href="{% url 'crear_activo_departamento' departamento %}" class="action-card-link">
                <div class="action-card">
                    <div class="action-icon primary">
                        <i class="bi bi-plus-lg"></i>
                    </div>
                    <div class="action-title">Agregar Activo</div>
                    <div class="action-desc">Registrar nuevo equipo</div>
                </div>
            </a>

               <a href="{% url 'exportar_activos_departamento' departamento %}" class="action-card-link">
    <div class="action-card">
        <div class="action-icon success">
            <i class="bi bi-clipboard-check"></i>
        </div>
        <div class="action-title">Reporte EXCEL</div>
        <div class="action-desc">Generar informe</div>
    </div>
</a>

<a href="{% url 'exportar_pdf_departamento' departamento %}" class="action-card-link">
                <div class="action-card">
                    <div class="action-icon primary">
                        <i class="bi bi-clipboard-check"></i>
                    </div>
                    <div class="action-title">Reporte PDF</div>
                    <div class="action-desc">Generar informe</div>
                </div>
</a>
                
            </div>

            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    
</body>
</html>



